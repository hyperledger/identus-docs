<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-identus/prism-node/running-node" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Running Node | Hyperledger Identus</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://hyperledger.github.io/identus-docs/docs/identus/prism-node/running-node"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Running Node | Hyperledger Identus"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/identus-docs/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://hyperledger.github.io/identus-docs/docs/identus/prism-node/running-node"><link data-rh="true" rel="alternate" href="https://hyperledger.github.io/identus-docs/docs/identus/prism-node/running-node" hreflang="en"><link data-rh="true" rel="alternate" href="https://hyperledger.github.io/identus-docs/docs/identus/prism-node/running-node" hreflang="x-default"><link rel="stylesheet" href="/identus-docs/assets/css/styles.7aa07c05.css">
<script src="/identus-docs/assets/js/runtime~main.3f832b8c.js" defer="defer"></script>
<script src="/identus-docs/assets/js/main.132f551c.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/identus-docs/"><div class="navbar__logo"><img src="/identus-docs/img/identus-navbar-light.png" alt=" Identus logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/identus-docs/img/identus-navbar-light.png" alt=" Identus logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/identus-docs/docs/getting-started">Docs</a><a class="navbar__item navbar__link" href="/identus-docs/tutorials/">Tutorials</a><a class="navbar__item navbar__link" href="/identus-docs/adrs/">ADRs</a><a class="navbar__item navbar__link" href="/identus-docs/agent-api/">Agent API</a><div class="navbar__item dropdown dropdown--hoverable"><a aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link" href="/identus-docs/docs/identus/prism-node/running-node">SDKs</a><ul class="dropdown__menu"><li><a href="https://hyperledger.github.io/identus-edge-agent-sdk-swift/documentation/edgeagentsdk/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Edge Agent SDK Swift<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a class="dropdown__link" href="/identus-docs/identus-edge-agent-sdk-ts/sdk">Edge Agent SDK Typescript</a></li><li><a href="https://hyperledger.github.io/identus-edge-agent-sdk-kmp/" target="_blank" rel="noopener noreferrer" class="dropdown__link">Edge Agent SDK Kotlin Multiplatform<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><a href="https://github.com/input-output-hk/prism-did-method-spec/blob/main/w3c-spec/PRISM-method.md" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">PRISM DID Spec<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/identus-docs/docs/getting-started">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/identus-docs/docs/quick-start">Quick Start Guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/identus-docs/docs/category/concepts">Concepts</a><button aria-label="Collapse sidebar category &#x27;Concepts&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/identus-docs/docs/concepts/identity">Why Identity</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/identus-docs/docs/concepts/multi-tenancy">Multi-Tenancy</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/identus-docs/docs/category/identus">Identus</a><button aria-label="Collapse sidebar category &#x27;Identus&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/identus-docs/docs/identus/overview">Overview</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/identus-docs/docs/category/cloud-agent">Cloud Agent</a><button aria-label="Expand sidebar category &#x27;Cloud Agent&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="/identus-docs/docs/category/prism-node">Prism Node</a><button aria-label="Collapse sidebar category &#x27;Prism Node&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/identus-docs/docs/identus/prism-node/overview">PRISM Node</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/identus-docs/docs/identus/prism-node/running-node">Running Node</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/identus-docs/docs/identus/mediator">Mediator</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/identus-docs/docs/identus/troubleshooting&amp;considerations">Troubleshooting &amp; Considerations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/identus-docs/docs/identus/getting-help">Getting Help</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/identus-docs/docs/concepts/glossary">Glossary</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/identus-docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/identus-docs/docs/category/identus"><span itemprop="name">Identus</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/identus-docs/docs/category/prism-node"><span itemprop="name">Prism Node</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Running Node</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Running Node</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview" href="/identus-docs/docs/identus/prism-node/running-node#overview">​</a></h2>
<p>The Node is a level 2 proxy on top of the Cardano blockchain responsible for publishing, resolving, updating, and deactivating DIDs. It exposes a gRPC API to perform all the operations above.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>This documentation will not describe the gRPC API itself.</p></div></div>
<p>The Identus cloud Agent communicates with the Node, with all operations conducted through it. The following documentation will provide a high-level overview of how the Node functions and explain its usage, including the environment variables required and how to deploy it to the Cardano mainnet and testnet.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="node-components">Node components<a class="hash-link" aria-label="Direct link to Node components" title="Direct link to Node components" href="/identus-docs/docs/identus/prism-node/running-node#node-components">​</a></h2>
<p>The Node consists of four separate executables:</p>
<ol>
<li>Node gRPC server</li>
<li>Node PosgresQL database</li>
<li>Cardano wallet backend</li>
<li>DB sync</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="node-grpc-server">Node gRPC server<a class="hash-link" aria-label="Direct link to Node gRPC server" title="Direct link to Node gRPC server" href="/identus-docs/docs/identus/prism-node/running-node#node-grpc-server">​</a></h4>
<p>The Node gRPC is a service responsible for submitting transactions to the Cardano network with a configurable frequency, retrieving blocks, and processing the data for storage in a database.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="node-posgresql-database">Node PosgresQL database<a class="hash-link" aria-label="Direct link to Node PosgresQL database" title="Direct link to Node PosgresQL database" href="/identus-docs/docs/identus/prism-node/running-node#node-posgresql-database">​</a></h4>
<p>The database used by the Node to store processed data, namely DID documents and their respective states.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="cardano-wallet-backend">Cardano wallet backend<a class="hash-link" aria-label="Direct link to Cardano wallet backend" title="Direct link to Cardano wallet backend" href="/identus-docs/docs/identus/prism-node/running-node#cardano-wallet-backend">​</a></h4>
<p>An interface enables the Node to submit transactions to the Cardano node.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="db-sync">DB sync.<a class="hash-link" aria-label="Direct link to DB sync." title="Direct link to DB sync." href="/identus-docs/docs/identus/prism-node/running-node#db-sync">​</a></h4>
<p>The Node uses an indexed version of the Cardano blockchain to access and parse minted blocks.</p>
<!-- -->
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="node-enviroment-variables">Node enviroment variables<a class="hash-link" aria-label="Direct link to Node enviroment variables" title="Direct link to Node enviroment variables" href="/identus-docs/docs/identus/prism-node/running-node#node-enviroment-variables">​</a></h3>
<table><thead><tr><th>Environment Variable</th><th>Description</th><th>Default Value</th><th>Data Type</th></tr></thead><tbody><tr><td>NODE_PSQL_HOST</td><td>Host and port of Node PosgresQL database</td><td>localhost:5432</td><td>String</td></tr><tr><td>NODE_PSQL_DATABASE</td><td>Name of the database to connect to</td><td>node_db</td><td>String</td></tr><tr><td>NODE_PSQL_USERNAME</td><td>Username for database authentication</td><td>postgres</td><td>String</td></tr><tr><td>NODE_PSQL_PASSWORD</td><td>Password for database authentication</td><td>postgres</td><td>String</td></tr><tr><td>NODE_PSQL_AWAIT_CONNECTION_THREADS</td><td>Maximum amount of database connections</td><td>8</td><td>Int</td></tr><tr><td>NODE_LEDGER</td><td>Ledger which will be used for txs and blocks</td><td>in-memory</td><td>Enum(in-memory, cardano)</td></tr><tr><td>NODE_REFRESH_AND_SUBMIT_PERIOD</td><td>Time period between refreshing transaction statuses and submitting pending operations</td><td>20s</td><td>String</td></tr><tr><td>NODE_MOVE_SCHEDULED_TO_PENDING_PERIOD</td><td>Time period between making scheduled operations ready for submissions</td><td>15s</td><td>String</td></tr><tr><td>NODE_WALLET_MAX_TPS</td><td>Maximum number of transactions cardano-wallet can work with</td><td>10</td><td>Int</td></tr><tr><td>NODE_DID_PUBLIC_KEYS_LIMIT</td><td>Maximum number of public keys Node API can create/update/get per request to a DID</td><td>50</td><td>Int</td></tr><tr><td>NODE_DID_SERVICES_LIMIT</td><td>Maximum number of services Node API can create/update/get per request to a DID</td><td>50</td><td>Int</td></tr><tr><td>NODE_SERVICE_ENDPOINT_CHAR_LIMIT</td><td>Maximum number of characters every DID service endpoint can have</td><td>300</td><td>Int</td></tr><tr><td>NODE_SERVICE_TYPE_CHAR_LIMIT</td><td>Maximum number of characters every DID type can have</td><td>100</td><td>Int</td></tr><tr><td>NODE_CONTEXT_STRING_CHAR_LIMIT</td><td>Maximum number of characters every context string of a DID can have</td><td>100</td><td>Int</td></tr><tr><td>NODE_ID_CHAR_LIMIT</td><td>Maximum number of characters id field of pk and service can have</td><td>50</td><td>Int</td></tr><tr><td>NODE_CARDANO_NETWORK</td><td>Cardano network node should operate on</td><td>testnet</td><td>Enum(testnet, mainnet)</td></tr><tr><td>NODE_CARDANO_WALLET_ID</td><td>ID (hex encoded) of the wallet to use for payments</td><td></td><td>String</td></tr><tr><td>NODE_CARDANO_WALLET_PASSPHRASE</td><td>Spending passphrase of NODE_CARDANO_WALLET_ID</td><td></td><td>String</td></tr><tr><td>NODE_CARDANO_PAYMENT_ADDRESS</td><td>Address (hex encoded) to make payments to, can be NODE_CARDANO_WALLET_ID itself</td><td></td><td>String</td></tr><tr><td>NODE_CARDANO_WALLET_API_HOST</td><td>Cardano wallet backend API host</td><td>localhost</td><td>String</td></tr><tr><td>NODE_CARDANO_WALLET_API_PORT</td><td>Cardano wallet backend API port</td><td>8090</td><td>Int</td></tr><tr><td>NODE_CARDANO_WALLET_ROUTING_HEADER_NAME</td><td>Cardano wallet backend routing header name</td><td></td><td>String</td></tr><tr><td>NODE_CARDANO_PRISM_GENESIS_BLOCK</td><td>Index of the first block from which node should start syncing from</td><td>1868381</td><td>Int</td></tr><tr><td>NODE_CARDANO_CONFIRMATION_BLOCKS</td><td>Number of blocks to wait before transaction is considered to be confirmed</td><td>112</td><td>Int</td></tr><tr><td>NODE_CARDANO_DB_SYNC_HOST</td><td>Db sync database host and port</td><td>localhost:5433</td><td>String</td></tr><tr><td>NODE_CARDANO_DB_SYNC_DATABASE</td><td>databse name in DB sync PosgresQL database</td><td>cexplorer</td><td>String</td></tr><tr><td>NODE_CARDANO_DB_SYNC_USERNAME</td><td>Username for db sync database authentication</td><td>postgres</td><td>String</td></tr><tr><td>NODE_CARDANO_DB_SYNC_PASSWORD</td><td>Password for db sync database authentication</td><td>password</td><td>String</td></tr></tbody></table>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="running-node-1">Running node<a class="hash-link" aria-label="Direct link to Running node" title="Direct link to Running node" href="/identus-docs/docs/identus/prism-node/running-node#running-node-1">​</a></h4>
<p>Node docker image is available on GitHub, accessible here:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">docker pull ghcr.io/input-output-hk/prism-node:2.3.0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>By default, Node will run with an <code>in-memory</code> ledger, ideal for development purposes. To run it on Cardano, you must set the <code>NODE_LEDGER</code> environment variable to <code>cardano</code>. If you do this, Node will utilize the Cardano wallet backend and DB-sync to query for blocks and submit transactions. It is crucial to have the Cardano wallet backend and DB-sync running before running the Node with <code>NODE_LEDGER</code> set to <code>cardano</code>.</p>
<p>Most up-to-date instructions on how to run the Cardano wallet backend and DB-sync are available in their respective repositories:</p>
<ul>
<li><a href="https://github.com/cardano-foundation/cardano-wallet" target="_blank" rel="noopener noreferrer">Cardano wallet backend</a></li>
<li><a href="https://github.com/IntersectMBO/cardano-db-sync" target="_blank" rel="noopener noreferrer">DB-sync</a></li>
</ul>
<p>Once you have these services up and running, specify their respective URLs in the environment variables of the Node:</p>
<ul>
<li>Cardano wallet backend<!-- -->
<ul>
<li><code>NODE_CARDANO_WALLET_API_HOST</code> for wallet server host</li>
<li><code>NODE_CARDANO_WALLET_API_PORT</code> for wallet server port</li>
<li><code>NODE_CARDANO_WALLET_ROUTING_HEADER_NAME</code> for wallet routing header name</li>
</ul>
</li>
<li>DB-sync<!-- -->
<ul>
<li><code>NODE_CARDANO_DB_SYNC_HOST</code> for DB-sync host and port in a format <code>host:port</code></li>
<li><code>NODE_CARDANO_DB_SYNC_DATABASE</code> the databse name in DB-sync postgres database</li>
<li><code>NODE_CARDANO_DB_SYNC_USERNAME</code> DB-sync Database username</li>
<li><code>NODE_CARDANO_DB_SYNC_PASSWORD</code> DB-sync Database password</li>
</ul>
</li>
</ul>
<p>When running the Node with Cardano ledger, you must specify which network to use, either <code>mainnet</code> or <code>testnet</code>, using the <code>NODE_CARDANO_NETWORK</code> environment variable. While this environment variable is essential for the correct operation of the Node, it does not define the usable network. As mentioned earlier, the interface communicates with the Cardano node; subsequently, the network is DB-sync and Cardano wallet backend. Therefore, when configuring those services, you must specify the network used in their respective configurations. It is possible to run DB-sync on testnet, and Cardano wallet backend on mainnet, and select either one via <code>NODE_CARDANO_NETWORK</code>. The Node won&#x27;t report any errors, but this configuration would be incorrect and won&#x27;t work correctly. You are responsible for syncing these three components. If you intend to use the testnet, set <code>NODE_CARDANO_NETWORK</code> to the testnet, but also run Cardano wallet backend connected to the testnet and start DB-sync to sync from the Node that is also running on the testnet as well. The same goes with mainnet.</p>
<p>Apart from that, you must also provide the Wallet ID and its spending password as environment variables as well:</p>
<ul>
<li><code>NODE_CARDANO_WALLET_ID</code> - The wallet ID must be in hex-encoded format, and the wallet must belong to the network you are running the Node on, which can be either testnet or mainnet</li>
<li><code>NODE_CARDANO_WALLET_PASSPHRAS</code> - Spending password or wallet above</li>
</ul>
<p>The Node utilizes Cardano as a decentralized open database, and its implementation is similar to the DIF Sidetree Protocol. In short, the Node stores all relevant information in a Cardano transaction metadata and sends 1 ADA (minimum allowed amount) to another address, which you must provide via the <code>NODE_CARDANO_PAYMENT_ADDRESS</code> environment variable, which will store arbitrary information on the blockchain. In most cases, you don&#x27;t need to specify a particular address for sending transactions as long as the transaction gets recorded. In this case, you should set NODE_CARDANO_PAYMENT_ADDRESS to the same address you are sending transactions from, <code>NODE_CARDANO_WALLET_ID</code>. In this configuration, you are not spending any ADA other than the transaction fee for every transaction. Suppose your wallet does not have enough ADA to cover the transaction fee (plus 1 ADA to send to yourself). In that case, the transaction won&#x27;t get recorded, and your operation, which includes any DID-related action, won&#x27;t be submitted.</p>
<p>The last component is the database that the Node uses internally to index Identus cloud agent related Cardano transactions and maintain the state of DID documents. It is a simple PostgreSQL version 13 database, and you can use the Docker image <code>postgres:13</code> to run it.</p>
<p>When running the Node, you must specify the host, database name, username, and password of this database via environment variables.</p>
<ul>
<li><code>NODE_PSQL_HOST</code> - host with a port, in a format <code>host:port</code></li>
<li><code>NODE_PSQL_DATABASE</code> - database name</li>
<li><code>NODE_PSQL_USERNAME</code> - username</li>
<li><code>NODE_PSQL_PASSWORD</code> - password</li>
</ul>
<p>The Node gRPC server has three dependencies: Node DB, Cardano wallet, and DB-sync. You need to run these three services before starting the Node.</p>
<p>Node DB is a simple PostgreSQL database.</p>
<p>Cardano wallet is an application that communicates with the Cardano network; it functions as a server that you can start and connect to either the mainnet or testnet. You must provide the Node runnable&#x27;s host and port as environment variables.</p>
<p>DB-sync is an application responsible for syncing the Cardano blockchain with a PostgreSQL database. It would help if you used it to sync with either the mainnet or testnet and must provide the database host with port, database name, and credentials as environment variables to the Node runnable.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/identus-docs/docs/identus/prism-node/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">PRISM Node</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/identus-docs/docs/identus/mediator"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Mediator</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/identus-docs/docs/identus/prism-node/running-node#overview">Overview</a></li><li><a class="table-of-contents__link toc-highlight" href="/identus-docs/docs/identus/prism-node/running-node#node-components">Node components</a><ul><li><a class="table-of-contents__link toc-highlight" href="/identus-docs/docs/identus/prism-node/running-node#node-enviroment-variables">Node enviroment variables</a></li></ul></li></ul></div></div></div></div></main></div></div></div><div class="container"><footer class="footer_J6tW"><svg xmlns="http://www.w3.org/2000/svg" width="145" height="38" fill="none"></svg><span class="copyright_C6JK">Hyperledger Identus CC BY 4.0</span></footer></div></div>
</body>
</html>
# Hosted Instances 

PRISM is designed as a cloud-native technology stack and is available to clients as a *Software-as-a-Service* (SaaS) offering. 

Clients and their developers can quickly begin interacting and building upon the SaaS offering without worrying about running an instance themselves.

This section is an introduction to the basics of hosted instances, some details on their architecture and links to instructions for interacting with them.

## Overview

Instances of the PRISM offering are hosted in Amazon Web Services and run within a Kubernetes container execution layer. 

Each instance is single-tenant, has dedicated storage and runs on shared infrastructure - all isolated. 

![Four single-tenant instances running isolated on shared infrastructure](/img/hosted-instances-overview-1.svg)

### Ingress into a dedicated instance

Each organization accesses its dedicated instance through an API Gateway that enforces authentication.

![Each instance is in use by a different organization](/img/hosted-instances-overview-2.svg)

Organizations cannot access any other instance apart from their own

![Organisation 1 cannot ](/img/hosted-instances-overview-3.svg)

Each instance has a dedicated domain name, and API tokens are issued to the organization to manage access. 

All ingress points are protected with TLS using strong cyphers and configuration parameters. 

### Accessing your dedicated instance

The name of each PRISM instance is a unique, randomly generated, 12-digit alphanumeric code. 

A domain name is created for each instance using this instance-id. 

> Please note that these instance-ids have been shortened to the first five digits in the diagrams on this page for brevity.

You can access your instance by prepending your instance-id to `atalaprism.io`

For example, for an environment given the instance-id of `ei30m6d5368w`, its APIs will be available at `ei30m6d5368w.atalaprism.io`

> Atala also prepend a `purpose` flag to instances. This flag indicates if they are development (d), test (t), staging (s), or production (p) instances. The purpose flag is not part of the domain.

Atala will provide you with your instance-id and API tokens when you are onboarded. 

> Atala recommends that you request the creation of additional tokens for each integration/service or human user that you have. Please see [Getting Help](../getting-help) for instructions on how to get in touch with us to request additional API tokens.

Please see [Authentication](../architecture/authentication) for more details on using an API token.

### What makes up a dedicated instance?

Each dedicated instance contains 
 - a PRISM Cloud Agent, 
 - a PRISM Cloud Agent Enterprise, 
 - a Verifiable Data Registry - PRISM Node,
 - and Dedicated Relational Storage

PRISM Node speaks to Cardano through shared infrastructure

![Each dedicated instance contains a PRISM Cloud Agent Enterprise, a PRISM Cloud Agent, a Verifiable Data Registry and Dedicated Relational Storage](/img/hosted-instances-overview-4.svg)

Each instance exposes many HTTP routes, allowing an organization to consume the components' capabilities.

 **PRISM Cloud Agent**, which sits at the core of every PRISM instance, provides:
  - a *DIDComm v2* endpoint for agent-to-agent communication
  - endpoints to control the configuration and actions of the agent
  - an endpoint which shows *documentation in Open API Standard* for all available endpoints

**PRISM Cloud Agent Enterprise** provides:
  - endpoints for the [Manage](../prism-cloud-agent-enterprise/manage) capability
  - endpoints for the [Onboard](../prism-cloud-agent-enterprise/onboard) capability
  - endpoints for the [Authenticate](../prism-cloud-agent-enterprise/authenticate) capability

**PRISM Node** does not provide endpoints that an organization can interact with - it gives internal only gRPC endpoints to the PRISM Cloud Agent for reading and writing to the distributed ledger - Cardano. Please see [PRISM Node](../prism-node) for further details on what this component does and how it works.

Each instance has **Dedicated Relational Storage**, a dedicated instance of a Postgres database. This database is not shared and is accessible from within your tenant only. The database uses authentication with secrets generated by your tenant at the creation time. 

### What else do I need to know about my instance?

Each dedicated instance is hosted within a Kubernetes cluster that spans a single AWS region. This underlying shared infrastructure is highly resilient and self-healing. 

Atala currently operates a single region in AWS, based in US East (N. Virginia).

Each region's Kubernetes cluster runs on EC2 instances spread amongst availability zones. The cluster runs an auto-scaler which creates additional nodes if a failure in one zone should occur.

Your instance is observable around the clock; Atala collects metrics and logs from all running services and has pre-defined alerts for notifying operational support staff of issues. 
